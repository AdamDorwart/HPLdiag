This directory contains everything that you'll need to run a single
node HPL problem on Comet using 12 MPI processes and 2 threads per
process.

HPL.dat			HPL input data
hpl_1n_12p_2t.run	Slurm batch script
xhpl.hybrid		HPL executable for hybrid (MPI+OpenMP) execution
hosts			List of Comet compute nodes

To run a single problem using first available node
sbatch hpl_1n_12p_2t.run

To run a single problem using a specific node
sbatch -w comet-xx-yy hpl_1n_12p_2t.run

'hosts' file can be generated with
sinfo -o "%n %R" -h | column -t | sort -u -k1,1 > hosts
The end of the file will sometimes contain a line for a 'fat' partition. Remove it as needed.

TODO:
For GPU nodes, use combination of HPL and AMBER
For SSD tests, look into IOR and FIO. Note that drive performance degrades as sectors get marked for TRIM and need to be periodically wiped to achevie full speed

Useful commands:
Get the status of all nodes currently enqueued
sinfo -o "%n %T %E" -n `squeue -h -o %n -u $USER | sed ':a;N;$!ba;s/\n/,/g'`
Create a hosts retest file from the TIMEOUTs in a result file
grep TIMEOUT log/HPLresults.050815 | awk '{print $4}' | grep -f - hosts > retestHosts
